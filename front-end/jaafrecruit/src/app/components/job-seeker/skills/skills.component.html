
<!-- ======= Sidebar ======= -->
<aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

        <li class="nav-item">
            <a class="nav-link collapsed" href="/jobseeker-dashboard">
                <i class="bi bi-grid"></i>
                <span>Dashboard</span>
            </a>
        </li><!-- End Dashboard Nav -->

        <li class="nav-heading">Pages</li>

        <!-- Profile Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="/jobseeker-profile">
                <i class="bi bi-caret-down-fill"></i>
                <span>Profile</span>
            </a>
        </li>
        <!-- End Profile Page Nav -->

        <!-- Skills Page Nav -->
        <li class="nav-item">
            <a class="nav-link " href="/jobseeker-skills">
                <i class="bi bi-caret-down-fill"></i>
                <span>Skills</span>
            </a>
        </li>
        <!-- End Skills Page Nav -->

        <!-- Education Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="/jobseeker-education">
                <i class="bi bi-caret-down-fill"></i>
                <span>Education</span>
            </a>
        </li>
        <!-- End Education Page Nav -->

        <!-- Experiance Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="/jobseeker-experiance">
                <i class="bi bi-caret-down-fill"></i>
                <span>Experiance</span>
            </a>
        </li>
        <!-- End Experiance Page Nav -->

        <!-- Job Posting Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="/job-posting">
                <i class="bi bi-caret-down-fill"></i>
                <span>Job Posting</span>
            </a>
        </li>
        <!-- End Job Posting Page Nav -->

        <li class="nav-item">
            <a class="nav-link collapsed" href="/contact-admin">
                <i class="bi bi-caret-down-fill"></i>
                <span>Contact Admin</span>
            </a>
        </li>
        <!-- End Contact Admin Page Nav -->
    </ul>

</aside><!-- End Sidebar-->

<main id="main" class="main">

    <div class="pagetitle">
        <h1>Skills</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="index.html">profile</a></li>
                <li class="breadcrumb-item active">skills</li>
            </ol>
        </nav>
    </div><!-- End Page Title -->

    <section class="section dashboard">
        <div class="row">
            <!-- Left side columns -->
            <div class="col-12">
                <div class="row">
                    <button class="col-3 btn btn-primary align-items-right addbutton" (click)="openAddSkillModal()">Add
                        New</button>
                    <!-- Skills -->
                    <div class="col-12">
                        <div class="card job-applications overflow-auto">

                            <!-- filter -->
                            <div class="filter">

                                <select [(ngModel)]="selectedCategory">
                                    <option value="">All</option>
                                    <option value="TECHNICAL">Technical Skills</option>
                                    <option value="SOFT_SKILLS">Soft Skills</option>
                                   </select>
                            </div>

                            <div>
                                <h2></h2>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Category</th>
                                            <th>Level</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let skill of skillsData | categoryFilter:selectedCategory">
                                            <td>{{ skill.name }}</td>
                                            <td>
                                                <span [ngClass]="getCategoryClass(skill.category)">
                                                    {{ skill.category }}
                                                </span>
                                            </td>
                                            <td>{{ skill.level }}</td>
                                            <td>
                                                <button class="btn btn-sm btn-primary"
                                                    (click)="openUpdateModal(skill)">Update</button>
                                                <button class="btn btn-sm btn-danger delbutton"
                                                    (click)="deleteSkill(skill.id)">Delete</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div><!-- End Recent Sales -->
                </div>
            </div><!-- End Left side columns -->


        </div>
    </section>

    <!-- Add Skill Modal -->
    <div class="modal fade" id="addSkillModal" tabindex="-1" aria-labelledby="addSkillModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addSkillModalLabel">Add Skill</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form [formGroup]="addSkillForm" (ngSubmit)="addSkill(addSkillForm.value)" novalidate>
                        <div class="mb-3">
                            <label for="skillName" class="form-label">Skill Name</label>
                            <input type="text" class="form-control" id="skillName" formControlName="name" required>
                            <div *ngIf="addSkillForm.controls['name'].invalid && (addSkillForm.controls['name'].dirty || addSkillForm.controls['name'].touched)"
                                class="invalid-feedback">
                                Skill name is required.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="skillCategory" class="form-label">Category</label>
                            <select class="form-select" id="skillCategory" formControlName="category" required>
                                <option value="TECHNICAL">Technical</option>
                                <option value="SOFT_SKILLS">Soft Skills</option>
                            </select>
                            <div *ngIf="addSkillForm.controls['category'].invalid && (addSkillForm.controls['category'].dirty || addSkillForm.controls['category'].touched)"
                                class="invalid-feedback">
                                Category is required.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="skillLevel" class="form-label">Level</label>
                            <select class="form-select" id="skillLevel" formControlName="level" required>
                                <option value="BEGINNER">Beginner</option>
                                <option value="INTERMEDIATE">Intermediate</option>
                                <option value="EXPERT">Expert</option>
                            </select>
                            <div *ngIf="addSkillForm.controls['level'].invalid && (addSkillForm.controls['level'].dirty || addSkillForm.controls['level'].touched)"
                                class="invalid-feedback">
                                Level is required.
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" [disabled]="addSkillForm.invalid">Submit</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        (click)="closeAddModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Skill Modal -->
    <div class="modal fade" id="updateSkillModal" tabindex="-1" aria-labelledby="updateSkillModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateSkillModalLabel">Update Skill</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form [formGroup]="updateSkillForm" (ngSubmit)="updateSkill(updateSkillForm.value)" novalidate>
                        <div class="form-group hidden">
                           <input type="hidden" formControlName="id">
                        </div>
                        <div class="form-group">
                           <label for="skillName">Skill Name</label>
                           <input type="text" class="form-control" id="skillName" formControlName="name" required>
                           <div *ngIf="updateSkillForm.controls['name'].invalid && (updateSkillForm.controls['name'].dirty || updateSkillForm.controls['name'].touched)" class="invalid-feedback">
                             Skill name is required.
                           </div>
                        </div>
                        <div class="form-group">
                           <label for="skillCategory">Category</label>
                           <select class="form-select" id="skillCategory" formControlName="category" required>
                             <option value="TECHNICAL">Technical</option>
                             <option value="SOFT_SKILLS">Soft Skills</option>
                           </select>
                           <div *ngIf="updateSkillForm.controls['category'].invalid && (updateSkillForm.controls['category'].dirty || updateSkillForm.controls['category'].touched)" class="invalid-feedback">
                             Category is required.
                           </div>
                        </div>
                        <div class="form-group">
                           <label for="skillLevel">Level</label>
                           <select class="form-select" id="skillLevel" formControlName="level" required>
                             <option value="BEGINNER">Beginner</option>
                             <option value="INTERMEDIATE">Intermediate</option>
                             <option value="EXPERT">Expert</option>
                           </select>
                           <div *ngIf="updateSkillForm.controls['level'].invalid && (updateSkillForm.controls['level'].dirty || updateSkillForm.controls['level'].touched)" class="invalid-feedback">
                             Level is required.
                           </div>
                        </div>
                        <button type="submit" class="btn btn-primary" [disabled]="updateSkillForm.invalid">Update</button>
                       </form>
                       
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</main><!-- End #main -->